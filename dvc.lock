schema: '2.0'
stages:
  preprocess:
    cmd: python3 src/preprocess.py
    deps:
    - path: data/
      md5: c6d21c69fb53a2967c104eff79b855dd.dir
      size: 969639
      nfiles: 1
    - path: src/preprocess.py
      md5: 46acb1656f297641e6c4233582a00218
      size: 1718
    params:
      params.yaml:
        preprocess.input: data/train.csv
        preprocess.output: feature/preprocess
    outs:
    - path: feature/preprocess
      md5: afa9a4fd3d2ea147cfd7e83ad561d4be.dir
      size: 754598
      nfiles: 1
  split:
    cmd: python3 src/split.py
    deps:
    - path: feature/preprocess
      md5: afa9a4fd3d2ea147cfd7e83ad561d4be.dir
      size: 754598
      nfiles: 1
    - path: src/split.py
      md5: 3d95e52d089ade88e72b974f2829cb9d
      size: 958
    params:
      params.yaml:
        split.csv_path: feature/preprocess/preprocessed.csv
        split.n_splits: 5
        split.test_path: split/test
        split.train_path: split/train
    outs:
    - path: split/test
      md5: 598bf3387cdefadfd058644b2c77c2dd.dir
      size: 149123
      nfiles: 1
    - path: split/train
      md5: e2cec17c151195e8d9e6549cbe359e5f.dir
      size: 605640
      nfiles: 1
  train:
    cmd: python3 src/trainning.py
    deps:
    - path: split/train
      md5: e2cec17c151195e8d9e6549cbe359e5f.dir
      size: 605640
      nfiles: 1
    - path: src/trainning.py
      md5: 753448a523c237fdc5808d44775b939e
      size: 2133
    params:
      params.yaml:
        train.cv: 5
        train.early_stopping_rounds: 150
        train.eval_metric: auc
        train.learning_rate: 0.05
        train.max_depth: 4
        train.model_path: model
        train.num_boost_round: 250
        train.objective: binary:logistic
        train.train_csv: split/train/train_split.csv
        train.verbosity: 0
    outs:
    - path: model/
      md5: 16b0f31a59d51a377f4657b1d0253b69.dir
      size: 238157
      nfiles: 1
  eval:
    cmd: python3 src/eval.py
    deps:
    - path: model/model.pkl
      md5: 668bd475c10086ae4b6dfd34ddcb3e4f
      size: 238157
    - path: split/test/eval.csv
      md5: 7f770a671d485a69b2d0522fcbbbf4b7
      size: 149123
    - path: src/eval.py
      md5: 7e4f26532114405621df544335875296
      size: 1257
    params:
      params.yaml:
        eval.eval_csv: split/test/eval.csv
        eval.model_path: model/model.pkl
        eval.score: metrics/
    outs:
    - path: metrics/metrics.json
      md5: 3ccc6d7d9f511f234ae9838dfeeb123b
      size: 27
